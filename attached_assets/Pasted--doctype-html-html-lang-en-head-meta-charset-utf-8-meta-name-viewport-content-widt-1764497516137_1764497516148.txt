<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Beautiful Search Engine</title>

<!-- Fuse.js CDN for fuzzy search -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>

<style>
  :root{
    --bg: #0f1724;
    --card: #0b1220;
    --muted: #9aa4b2;
    --accent: #6ee7b7;
    --accent-2: #60a5fa;
    --glass: rgba(255,255,255,0.04);
    --shadow: 0 8px 30px rgba(2,6,23,0.6);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: linear-gradient(180deg,#071124 0%, #071022 60%), radial-gradient(800px 500px at 10% 10%, rgba(96,165,250,0.06), transparent 10%), var(--bg);
    color:#e6eef6;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
  }

  .search-app{
    width:100%;
    max-width:980px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px;
    padding:28px;
    box-shadow:var(--shadow);
    backdrop-filter: blur(8px) saturate(120%);
    border:1px solid rgba(255,255,255,0.03);
  }

  header{
    display:flex;
    gap:16px;
    align-items:center;
    margin-bottom:18px;
  }
  .logo{
    width:64px;height:64px;border-radius:12px;
    background: linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:22px;color:#042022;
    box-shadow: 0 6px 22px rgba(96,165,250,0.12), inset 0 -6px 18px rgba(0,0,0,0.12);
  }
  h1{font-size:18px;margin:0}
  p.lead{margin:0;color:var(--muted);font-size:13px}

  .searchbar{
    display:flex;
    gap:10px;
    margin-top:18px;
    align-items:center;
  }

  .input-wrap{
    flex:1;
    position:relative;
  }
  input.search{
    width:100%;
    padding:14px 48px 14px 16px;
    border-radius:12px;
    background:var(--card);
    border:1px solid rgba(255,255,255,0.04);
    color:inherit;
    font-size:15px;
    outline:none;
    box-shadow: 0 6px 18px rgba(2,6,23,0.45);
  }
  .input-icon{
    position:absolute;
    right:12px;
    top:50%;
    transform:translateY(-50%);
    display:flex;
    gap:6px;
    align-items:center;
  }
  .btn{
    padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#042022;font-weight:600;cursor:pointer;
    box-shadow: 0 6px 18px rgba(96,165,250,0.12);
  }

  .results{
    display:grid;
    grid-template-columns: 1fr 340px;
    gap:18px;
    margin-top:22px;
  }

  .hits {
    background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    padding:14px;border-radius:12px;
    min-height:220px;
  }
  .side {
    background:var(--glass);
    padding:14px;border-radius:12px;color:var(--muted);
  }

  .hit{
    padding:12px;border-radius:10px;margin-bottom:12px;
    transition:transform .18s ease, box-shadow .18s ease;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    border:1px solid rgba(255,255,255,0.02);
    cursor:pointer;
  }
  .hit:hover{transform:translateY(-6px);box-shadow:0 12px 34px rgba(2,6,23,0.5)}
  .title{font-weight:700;margin:0 0 6px 0}
  .desc{margin:0;color:var(--muted);font-size:13px}
  .meta{margin-top:8px;font-size:12px;color:var(--muted);display:flex;gap:10px;flex-wrap:wrap}
  .tag{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-weight:600;font-size:12px}

  .highlight{
    background:linear-gradient(90deg,#ffeaa7 10%, #ffd86b 90%);
    color:#122;
    padding:0 4px;border-radius:4px;font-weight:700;
  }

  .suggestions{
    position:absolute;
    left:0;right:0;
    top:100%;margin-top:8px;
    background:var(--card);border-radius:10px;padding:8px;border:1px solid rgba(255,255,255,0.03);
    max-height:220px;overflow:auto;z-index:40;
  }
  .suggestion{padding:8px;border-radius:8px;cursor:pointer}
  .suggestion:hover, .suggestion.active{background:rgba(255,255,255,0.02)}

  .controls{display:flex;gap:10px;align-items:center}
  .small{font-size:13px;color:var(--muted)}

  footer{margin-top:18px;color:var(--muted);font-size:13px}

  /* Responsive */
  @media (max-width:880px){
    .results{grid-template-columns: 1fr; }
    .side{order:2}
  }

</style>
</head>
<body>

<div class="search-app" role="application" aria-label="Beautiful search engine">
  <header>
    <div class="logo">SI</div>
    <div>
      <h1>SearchInk</h1>
      <p class="lead">Fast, pretty & fuzzy — search anything. Try “coffee” or “metaverse”.</p>
    </div>
    <div style="margin-left:auto" class="controls">
      <div class="small" id="count">0 results</div>
      <button id="toggleTheme" class="btn" title="Toggle light/dark">Theme</button>
    </div>
  </header>

  <div class="searchbar">
    <div class="input-wrap" style="position:relative;">
      <input id="q" class="search" type="search" placeholder="Search titles, descriptions or tags..." aria-label="Search" autocomplete="off" />
      <div class="input-icon">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9"><path d="M21 21l-4.35-4.35" stroke="white" stroke-width="1.6" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="white" stroke-width="1.6"/></svg>
      </div>

      <div id="suggestions" class="suggestions" hidden></div>
    </div>

    <button id="searchBtn" class="btn">Search</button>
  </div>

  <div class="results" aria-live="polite">
    <div class="hits" id="hits"></div>
    <aside class="side">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong>Filters</strong></div>
        <div class="small">Refine</div>
      </div>

      <div style="margin-top:12px">
        <label class="small">Tags</label>
        <div style="display:flex;gap:6px;margin-top:8px;flex-wrap:wrap" id="filterTags"></div>
      </div>

      <div style="margin-top:14px">
        <label class="small">Results per page</label>
        <select id="perPage" style="width:100%;margin-top:8px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
          <option>5</option><option selected>10</option><option>20</option>
        </select>
      </div>

      <div style="margin-top:14px">
        <label class="small">Sort</label>
        <select id="sort" style="width:100%;margin-top:8px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
          <option value="relevance" selected>Relevance</option>
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
        </select>
      </div>
    </aside>
  </div>

  <footer>
    Built with ❤️ — demo dataset. Replace <code>DATA</code> with your own JSON to adapt.
  </footer>
</div>

<script>
/* --------------------
   Sample dataset (replace with real data or load from API)
   Each item: id, title, description, tags (array), date (ISO)
   -------------------- */
const DATA = [
  { id:1, title:"Coffee Culture: A Short History", description:"Explore coffee shops, origins and rituals across the world.", tags:["coffee","culture","history"], date:"2024-12-02" },
  { id:2, title:"Metaverse UX Patterns", description:"Design principles for immersive experiences and social spaces.", tags:["ux","metaverse","design"], date:"2025-03-10" },
  { id:3, title:"AI for Creators", description:"How small creators leverage AI to scale content workflow.", tags:["ai","creators","productivity"], date:"2024-09-30" },
  { id:4, title:"Street Food Guide", description:"A lovingly curated guide to the best street food in your city.", tags:["food","guide","local"], date:"2023-05-20" },
  { id:5, title:"Photography: Light & Mood", description:"Techniques to capture mood using natural and artificial light.", tags:["photography","camera","light"], date:"2025-01-15" },
  { id:6, title:"Cryptic Puzzles", description:"A book of puzzles to stretch your mind and patience.", tags:["puzzles","games","brain"], date:"2022-11-01" },
  { id:7, title:"Sustainable Architecture", description:"Design strategies that prioritize ecology and people.", tags:["architecture","sustainability"], date:"2024-06-14" },
  { id:8, title:"Guide to Freelancing", description:"Practical advice for building a freelance career online.", tags:["freelance","career","guide"], date:"2025-02-21" },
  { id:9, title:"Gardening in Small Spaces", description:"How to grow a thriving garden on balconies and windowsills.", tags:["gardening","home","plants"], date:"2023-07-09" },
  { id:10, title:"Beginner's Guide to JavaScript", description:"Learn modern JavaScript fundamentals with hands-on examples.", tags:["javascript","programming","guide"], date:"2025-04-02" },
  // ... add more items
];

/* --------------------
   Setup Fuse.js with options
   Weighted keys: title > tags > description
   -------------------- */
const fuseOptions = {
  includeMatches: true,
  threshold: 0.36,
  keys: [
    { name: "title", weight: 0.6 },
    { name: "tags", weight: 0.25 },
    { name: "description", weight: 0.15 }
  ],
  minMatchCharLength: 2,
};
const fuse = new Fuse(DATA, fuseOptions);

/* --------------------
   DOM references
   -------------------- */
const qEl = document.getElementById('q');
const hitsEl = document.getElementById('hits');
const suggestionsEl = document.getElementById('suggestions');
const countEl = document.getElementById('count');
const perPageEl = document.getElementById('perPage');
const sortEl = document.getElementById('sort');
const filterTagsEl = document.getElementById('filterTags');
const searchBtn = document.getElementById('searchBtn');
const toggleThemeBtn = document.getElementById('toggleTheme');

/* --------------------
   UI State
   -------------------- */
let state = {
  query: '',
  results: [],
  page: 1,
  perPage: parseInt(perPageEl.value,10),
  activeTag: null,
  suggestionIndex: -1,
};

/* --------------------
   Utility helpers
   -------------------- */
function debounce(fn, wait=220){ let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), wait); }; }
function highlightText(text, matches){
  if(!matches || matches.length===0) return escapeHtml(text);
  // build map of ranges
  let fragments = [];
  let last = 0;
  matches.forEach(m=>{
    const [start,end] = m;
    if(start>last){ fragments.push(escapeHtml(text.slice(last,start))); }
    fragments.push(`<span class="highlight">${escapeHtml(text.slice(start,end+1))}</span>`);
    last = end+1;
  });
  if(last < text.length) fragments.push(escapeHtml(text.slice(last)));
  return fragments.join('');
}
function escapeHtml(s){ return s.replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]); }

/* --------------------
   Suggestions: show top 6 unique token suggestions from titles/tags
   -------------------- */
function showSuggestions(query){
  if(!query || query.trim().length<2){ suggestionsEl.hidden = true; return; }
  const tokens = new Set();
  for(const item of DATA){
    if(tokens.size>=12) break;
    const t = item.title.split(/\s+/).map(s=>s.replace(/[^\w]/g,'')).filter(Boolean);
    for(const w of t){
      if(w.toLowerCase().includes(query.toLowerCase())) tokens.add(w);
      if(tokens.size>=12) break;
    }
    for(const tag of item.tags){
      if(tag.toLowerCase().includes(query.toLowerCase())) tokens.add(tag);
      if(tokens.size>=12) break;
    }
  }
  suggestionsEl.innerHTML = '';
  Array.from(tokens).slice(0,8).forEach((s, idx)=>{
    const div = document.createElement('div');
    div.className = 'suggestion';
    div.textContent = s;
    div.addEventListener('click', ()=>{ qEl.value = s; applySearch(); });
    suggestionsEl.appendChild(div);
  });
  suggestionsEl.hidden = tokens.size===0;
}

/* --------------------
   Build tag filter UI
   -------------------- */
function buildTagFilters(){
  const allTags = new Map();
  DATA.forEach(it=> it.tags.forEach(t=>{
    allTags.set(t, (allTags.get(t)||0)+1);
  }));
  filterTagsEl.innerHTML = '';
  for(const [tag,count] of allTags){
    const btn = document.createElement('button');
    btn.className = 'tag';
    btn.textContent = `${tag} · ${count}`;
    btn.addEventListener('click', ()=>{
      state.activeTag = state.activeTag === tag ? null : tag;
      applySearch();
    });
    if(state.activeTag === tag){
      btn.style.background = 'linear-gradient(90deg,var(--accent),var(--accent-2))';
      btn.style.color = '#042022';
    }
    filterTagsEl.appendChild(btn);
  }
}

/* --------------------
   Render results with pagination & highlighting
   -------------------- */
function renderResults(){
  const start = (state.page - 1) * state.perPage;
  const end = start + state.perPage;
  const pageItems = state.results.slice(start, end);
  hitsEl.innerHTML = '';

  if(state.results.length === 0){
    hitsEl.innerHTML = `<div style="padding:26px;color:var(--muted)">No results — try different words or remove filters.</div>`;
    countEl.textContent = '0 results';
    return;
  }

  countEl.textContent = `${state.results.length} result${state.results.length>1?'s':''}`;
  pageItems.forEach(r=>{
    const item = r.item || r; // if from fuse: r.item, else raw
    const matches = r.matches || [];
    // find match info for title and description
    let titleMatches = [];
    let descMatches = [];
    matches.forEach(m=>{
      if(m.key === 'title') titleMatches = m.indices;
      if(m.key === 'description') descMatches = m.indices;
    });

    const div = document.createElement('div');
    div.className = 'hit';
    div.tabIndex = 0;
    div.innerHTML = `
      <div class="title">${ highlightText(item.title, titleMatches) }</div>
      <div class="desc">${ highlightText(item.description, descMatches) }</div>
      <div class="meta">${ item.tags.map(t=>' <span class="tag">'+escapeHtml(t)+'</span>').join('') } <span style="margin-left:auto"></span></div>
    `;
    div.addEventListener('click', ()=> openDetail(item));
    hitsEl.appendChild(div);
  });

  // pagination controls
  const pages = Math.ceil(state.results.length / state.perPage);
  const pager = document.createElement('div');
  pager.style.display = 'flex';
  pager.style.gap = '8px';
  pager.style.justifyContent = 'center';
  pager.style.marginTop = '10px';
  pager.style.alignItems = 'center';

  const prev = document.createElement('button');
  prev.className = 'btn';
  prev.textContent = 'Prev';
  prev.disabled = state.page<=1;
  prev.style.opacity = prev.disabled?0.5:1;
  prev.addEventListener('click', ()=>{ state.page--; renderResults(); });

  const next = document.createElement('button');
  next.className = 'btn';
  next.textContent = 'Next';
  next.disabled = state.page>=pages;
  next.style.opacity = next.disabled?0.5:1;
  next.addEventListener('click', ()=>{ state.page++; renderResults(); });

  const pageInfo = document.createElement('div');
  pageInfo.className = 'small';
  pageInfo.textContent = `${state.page} / ${pages}`;

  pager.appendChild(prev);
  pager.appendChild(pageInfo);
  pager.appendChild(next);
  hitsEl.appendChild(pager);
}

/* --------------------
   Open detail (simple modal replacement)
   -------------------- */
function openDetail(item){
  alert(`${item.title}\n\n${item.description}\n\nTags: ${item.tags.join(', ')}\nDate: ${item.date}`);
}

/* --------------------
   Search logic
   -------------------- */
function runSearch(q){
  state.query = q || '';
  state.page = 1;
  state.perPage = parseInt(perPageEl.value,10);
  // Apply Fuse search or return all when empty
  let results;
  if(!state.query.trim()){
    // raw list, maybe sorted
    results = DATA.map(d => ({ item: d }));
  } else {
    results = fuse.search(state.query);
  }

  // Filter by tag if active
  if(state.activeTag){
    results = results.filter(r => (r.item || r).tags.includes(state.activeTag));
  }

  // Sorting
  const sortBy = sortEl.value;
  results.sort((a,b)=>{
    const ia = (a.item||a), ib=(b.item||b);
    if(sortBy === 'newest') return new Date(ib.date) - new Date(ia.date);
    if(sortBy === 'oldest') return new Date(ia.date) - new Date(ib.date);
    return 0; // keep Fuse order (relevance)
  });

  state.results = results;
  renderResults();
  buildTagFilters();
}

/* Debounced wrapper for suggestions when typing */
const onType = debounce((val)=>{
  showSuggestions(val);
  // live search (if you want immediate results while typing)
  runSearch(val);
}, 220);

/* Non-debounced apply (explicit search button or enter) */
function applySearch(){
  suggestionsEl.hidden = true;
  runSearch(qEl.value.trim());
}

/* Keyboard navigation for suggestions */
qEl.addEventListener('keydown', (ev)=>{
  const suggestions = Array.from(suggestionsEl.querySelectorAll('.suggestion'));
  if(suggestionsEl.hidden || suggestions.length===0) return;
  if(ev.key === 'ArrowDown'){ ev.preventDefault(); state.suggestionIndex = Math.min(state.suggestionIndex+1, suggestions.length-1); updateSuggestionActive(suggestions); }
  if(ev.key === 'ArrowUp'){ ev.preventDefault(); state.suggestionIndex = Math.max(state.suggestionIndex-1, 0); updateSuggestionActive(suggestions); }
  if(ev.key === 'Enter'){ if(state.suggestionIndex >= 0){ ev.preventDefault(); suggestions[state.suggestionIndex].click(); state.suggestionIndex=-1; } else { applySearch(); } }
});
function updateSuggestionActive(suggestions){
  suggestions.forEach((s, i)=> s.classList.toggle('active', i === state.suggestionIndex));
  if(state.suggestionIndex>=0){
    suggestions[state.suggestionIndex].scrollIntoView({block:'nearest'});
  }
}

/* DOM events */
qEl.addEventListener('input', (e)=> onType(e.target.value));
qEl.addEventListener('focus', (e)=> showSuggestions(e.target.value));
document.addEventListener('click', (e)=> { if(!suggestionsEl.contains(e.target) && e.target !== qEl) suggestionsEl.hidden = true; });
searchBtn.addEventListener('click', applySearch);
perPageEl.addEventListener('change', ()=>{ state.perPage = parseInt(perPageEl.value,10); renderResults(); });
sortEl.addEventListener('change', ()=> runSearch(qEl.value));

toggleThemeBtn.addEventListener('click', ()=>{
  // simple theme toggle (light/dark) by flipping root colors
  if(document.documentElement.style.getPropertyValue('--bg') === '#0f1724'){
    document.documentElement.style.setProperty('--bg', '#f7fafc');
    document.documentElement.style.setProperty('--card', '#ffffff');
    document.documentElement.style.setProperty('--muted', '#475569');
    document.documentElement.style.setProperty('--accent', '#60a5fa');
    document.documentElement.style.setProperty('--accent-2', '#7c3aed');
    document.documentElement.style.setProperty('--glass', 'rgba(0,0,0,0.03)');
    document.body.style.color = '#0b1220';
  } else {
    document.documentElement.style.setProperty('--bg', '#0f1724');
    document.documentElement.style.setProperty('--card', '#0b1220');
    document.documentElement.style.setProperty('--muted', '#9aa4b2');
    document.documentElement.style.setProperty('--accent', '#6ee7b7');
    document.documentElement.style.setProperty('--accent-2', '#60a5fa');
    document.documentElement.style.setProperty('--glass', 'rgba(255,255,255,0.04)');
    document.body.style.color = '#e6eef6';
  }
});

/* Init */
buildTagFilters();
runSearch(''); // initial render
</script>

</body>
</html>